# ç‡Ÿé¤Šè¨ˆç®—æ©Ÿ (Nutrition Calculator)

é€™æ˜¯ä¸€æ¬¾ä½¿ç”¨ SwiftUI é–‹ç™¼çš„ iOS æ‡‰ç”¨ç¨‹å¼ï¼Œæ—¨åœ¨å¹«åŠ©ä½¿ç”¨è€…è¼•é¬†è¿½è¹¤æ¯æ—¥çš„ç‡Ÿé¤Šæ”å–ï¼Œä¸¦æ ¹æ“šå€‹äººèº«é«”æ•¸æ“šå’Œå¥èº«ç›®æ¨™ï¼Œæä¾›å€‹äººåŒ–çš„ç‡Ÿé¤Šå»ºè­°ã€‚

## ğŸŒŸ ä¸»è¦ç‰¹è‰²

*   **AI é£Ÿç‰©è¾¨è­˜**ï¼šé€éæ•´åˆ Google Gemini APIï¼Œä½¿ç”¨è€…åªéœ€æ‹æ”é£Ÿç‰©ç…§ç‰‡ï¼ŒApp å³å¯è‡ªå‹•è¾¨è­˜é£Ÿç‰©åç¨±ä¸¦å¡«å…¥å…¶ç‡Ÿé¤Šæˆåˆ†ï¼ˆç†±é‡ã€è›‹ç™½è³ªã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©ï¼‰ã€‚
*   **å€‹äººåŒ–ç‡Ÿé¤Šç›®æ¨™**ï¼š
    *   ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥å¹´é½¡ã€èº«é«˜ã€é«”é‡ã€é«”è„‚ç­‰å€‹äººè³‡æ–™ã€‚
    *   å¯è¨­å®šã€Œå¢è‚Œã€æˆ–ã€Œæ¸›è„‚ã€ç­‰ä¸åŒçš„å¥èº«ç›®æ¨™ã€‚
    *   App æœƒæ ¹æ“š Harris-Benedict å…¬å¼è¨ˆç®—åŸºç¤ä»£è¬ç‡ (BMR) å’Œæ¯æ—¥ç¸½æ¶ˆè€—é‡ (TDEE)ï¼Œä¸¦çµåˆå¥èº«ç›®æ¨™ï¼Œè‡ªå‹•ç”Ÿæˆå»ºè­°çš„æ¯æ—¥ç‡Ÿé¤Šæ”å–ç›®æ¨™ã€‚
*   **è©³ç´°çš„æ¯æ—¥è¿½è¹¤**ï¼š
    *   ä¸»ç•«é¢ä»¥åˆ†é æ–¹å¼å‘ˆç¾éå»ä¸ƒæ—¥çš„é£²é£Ÿç´€éŒ„ã€‚
    *   æ¸…æ™°çš„ç›®æ¨™é€²åº¦æ¢ï¼Œé¡¯ç¤ºç•¶æ—¥ç†±é‡ã€è›‹ç™½è³ªã€è„‚è‚ªçš„æ”å–é€²åº¦ã€‚
    *   å¯éš¨æ™‚èª¿æ•´ç•¶æ—¥é£Ÿç‰©çš„ä»½é‡ã€‚
*   **å¿«é€Ÿæ–°å¢é£Ÿç‰©**ï¼š
    *   æä¾›ã€Œå¿«é€Ÿé¸å–ã€åŠŸèƒ½ï¼Œåˆ—å‡ºæœ€å¸¸åƒçš„é£Ÿç‰©ï¼Œï¿½ï¿½æ“Šå³å¯å¿«é€ŸåŠ å…¥ã€‚
    *   æ–°å¢é£Ÿç‰©æ™‚ï¼Œæœƒè‡ªå‹•æœå°‹æ­·å²ç´€éŒ„ï¼Œæ–¹ä¾¿å†æ¬¡è¼¸å…¥ã€‚
*   **æœ¬åœ°æ•¸æ“šå„²å­˜**ï¼šæ‰€æœ‰é£²é£Ÿç´€éŒ„ã€å€‹äººè³‡æ–™å’Œç›®æ¨™éƒ½å®‰å…¨åœ°å„²å­˜åœ¨è£ç½®æœ¬åœ°çš„ SQLite è³‡æ–™åº«ä¸­ï¼Œç¢ºä¿éš±ç§ã€‚

## ğŸš€ å¦‚ä½•ä½¿ç”¨

1.  **è¨­å®šå€‹äººç›®æ¨™**ï¼š
    *   åˆæ¬¡ä½¿ç”¨æ™‚ï¼Œè«‹è‡³ã€Œè¨­å®šã€é é¢ (ä¸»ç•«é¢å·¦ä¸Šè§’çš„é½’è¼ªåœ–ç¤º)ã€‚
    *   å¡«å¯«æ‚¨çš„å€‹äººè³‡æ–™ï¼ˆå¹´é½¡ã€æ€§åˆ¥ã€é«”é‡ç­‰ï¼‰å’Œå¥èº«ç›®æ¨™ã€‚
    *   æ‚¨å¯ä»¥æ‰‹å‹•è¨­å®šæ¯æ—¥ç‡Ÿé¤Šç›®æ¨™ï¼Œæˆ–é»æ“Šã€Œæ ¹æ“šå€‹äººè³‡æ–™ç”Ÿæˆå»ºè­°ç›®æ¨™ã€ä¾†è‡ªå‹•è¨ˆç®—ã€‚
2.  **æ–°å¢é£Ÿç‰©**ï¼š
    *   é»æ“Šä¸»ç•«é¢å³ä¸Šè§’çš„ã€Œ+ æ–°å¢ä»Šæ—¥é£Ÿç‰©ã€ã€‚
    *   **æ‰‹å‹•è¼¸å…¥**ï¼šç›´æ¥å¡«å¯«é£Ÿç‰©çš„å„é …ç‡Ÿé¤Šæ•¸å€¼ã€‚
    *   **AI è¾¨è­˜**ï¼šé»æ“Šã€Œé¸æ“‡ç…§ç‰‡ã€ï¼Œå¾ç›¸ç°¿é¸å–é£Ÿç‰©åœ–ç‰‡ï¼Œç„¶å¾Œé»æ“Šã€Œç”¨ Gemini åˆ†æç…§ç‰‡è‡ªå‹•å¡«å…¥ã€ã€‚
    *   **æ­·å²æœå°‹**ï¼šåœ¨è¼¸å…¥é£Ÿç‰©åç¨±æ™‚ï¼Œä¸‹æ–¹æœƒè‡ªå‹•é¡¯ç¤ºç¬¦åˆçš„æ­·å²ç´€éŒ„ï¼Œé»æ“Šå³å¯å¸¶å…¥ã€‚
3.  **å¿«é€Ÿé¸å–**ï¼š
    *   åœ¨ä¸»ç•«é¢çš„ã€Œä»Šæ—¥ã€é é¢ï¼Œå‘å·¦æ»‘å‹•å¯é€²å…¥ã€Œå¿«é€Ÿé¸å–é£Ÿç‰©ã€é é¢ã€‚
    *   é€™è£¡æœƒé¡¯ç¤ºæ‚¨æœ€å¸¸åƒçš„é£Ÿç‰©ï¼Œé»æ“Šå³å¯åŠ å…¥ä¸€æ•´ä»½ã€‚
4.  **æŸ¥çœ‹èˆ‡ç®¡ç†**ï¼š
    *   åœ¨ä¸»ç•«é¢å·¦å³æ»‘å‹•ï¼Œå¯ä»¥æŸ¥çœ‹éå»ä¸ƒå¤©çš„é£²é£Ÿç´€éŒ„ã€‚
    *   åœ¨é£Ÿç‰©æ¸…å–®ä¸Šå‘å·¦æ»‘ï¿½ï¿½ï¼Œå¯ä»¥åˆªé™¤è©²ç­†ç´€éŒ„ã€‚
    *   é»æ“Šä»Šæ—¥é£Ÿç‰©æ—çš„ `+` / `-` æŒ‰éˆ•ï¼Œå¯ä»¥å¿«é€Ÿèª¿æ•´ä»½é‡ã€‚

## ğŸ› ï¸ æ‰€ç”¨æŠ€è¡“

*   **UI æ¡†æ¶**: SwiftUI
*   **è³‡æ–™åº«**: SQLite.swift (ç”¨æ–¼æ“ä½œæœ¬åœ° SQLite è³‡æ–™åº«)
*   **AI æ¨¡å‹**: Google Gemini API (ç”¨æ–¼åœ–åƒè¾¨è­˜èˆ‡ç‡Ÿé¤Šåˆ†æ)
*   **åœ–ç‰‡é¸æ“‡**: PhotosUI

## ğŸ“‹ å®‰è£èˆ‡è¨­å®š

1.  **Clone å°ˆæ¡ˆ**ï¼š
    ```bash
    git clone https://github.com/shaoyunhsu/Nutrition-Calculator.git
    ```
2.  **é–‹å•Ÿå°ˆæ¡ˆ**ï¼š
    ä½¿ç”¨ Xcode é–‹å•Ÿ `Nutrition Calculator.xcodeproj`ã€‚

3.  **è¨­å®š Gemini API é‡‘é‘°**ï¼š
    *   å‰å¾€ [Google AI Studio](https://aistudio.google.com/app/apikey) å–å¾—æ‚¨çš„ API é‡‘é‘°ã€‚
    *   åœ¨ Xcode ä¸­ï¼Œæ‰¾åˆ° `Nutrition Calculator` Targetã€‚
    *   å‰å¾€ `Build Settings` -> `User-Defined`ã€‚
    *   æ‰¾åˆ°åç‚º `GEMINI_API_KEY` çš„è¨­å®šã€‚
    *   å°‡æ‚¨çš„ Google Gemini API é‡‘é‘°è²¼å…¥æ­¤æ¬„ä½ã€‚

    ![Xcode Build Settings](https://i.imgur.com/your-image-link.png)  <!-- é€™è£¡å¯ä»¥æ›æˆè¨­å®šæ•™å­¸åœ–ç‰‡ -->

4.  **ç·¨è­¯èˆ‡åŸ·è¡Œ**ï¼š
    é¸æ“‡æ‚¨çš„æ¨¡æ“¬å™¨æˆ–å¯¦é«”è£ç½®ï¼Œé»æ“Š "Run" æŒ‰éˆ•ã€‚

## ğŸ›ï¸ è³‡æ–™åº«å¯¦é«”é—œä¿‚åœ– (ERD)

```mermaid
erDiagram
    foods {
        INTEGER id PK "ä¸»éµ"
        TEXT name
        TEXT shortName
        REAL calories
        REAL protein
        REAL fat
        REAL carbs
        REAL date
        REAL portions
        REAL weighs "å¯é¸"
        TEXT results "JSON å­—ä¸²ï¼Œå¯é¸"
        TEXT imagePath "å¯é¸"
    }

    user_profiles {
        INTEGER id PK "ä¸»éµ"
        INTEGER age
        TEXT gender
        REAL weight
        REAL body_fat_percentage
        REAL height
        TEXT fitness_goal
        REAL created_at
    }

    nutrition_goals {
        INTEGER id PK "ä¸»éµ"
        REAL daily_calories
        REAL daily_protein
        REAL daily_fat
        REAL created_at
    }

    user_profiles ||..o{ nutrition_goals : "ç”Ÿæˆå»ºè­°"
    user_profiles ||..o{ foods : "å½±éŸ¿"
    nutrition_goals ||..o{ foods : "ä½œç‚ºç›®æ¨™"
}
```

## Build comments
```bash
ad91ce7eab9e19c6bab06887d54c3f5867471c44 add nutrient names in Add new Food view
126fc7eabf0184e3b86ef2b6fbcbb1cddd94 add portion services field.
977767452262cb0b356f5d7a0826a1377a5df5e3 UiUpdate:short name
4fb2a5f49a6f95958fc0f0c19720d06c029294d7 project configuration update
f45fce0593c74a78238efc620b043c3e0264603d multilang update
9fdb81544f40a1f4008a8d65d6b63dd0b0fec6f6 add default value for db update
ae8540dd032f62d8342c995a9b0b5e55292f79d2 claude.md updated
b6987a46645df6d7311db79ef0f533dcd913ff52 multi-language version
11cc07c30e6b8a1a6e81ebc8446c4715141292a1 Ignore Package.resolved
db5c1d0c87b79bdc729ced6ef0126d3ad15eed9b number decimal format
fa3267098b3fc92099452825f7139fa95e2135cd adjust gesture
6ceaf13b134b34569335b6f9d644eb833e242a26 add icon
a4afa074d09cc5c7b445ab17acb29079e10db355 layout tuning
5c58f5c49f1178ae87ca500a05ae94316385c9b4 mobile device test
```

---
ç”± SHAOYUN HSU æ–¼ 2025 å¹´è£½ä½œã€‚